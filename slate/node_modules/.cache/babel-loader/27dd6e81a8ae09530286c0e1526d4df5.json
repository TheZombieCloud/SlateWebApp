{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexm\\\\Documents\\\\GitHub\\\\SlateWebApp\\\\slate\\\\src\\\\Schedule.js\";\nimport React from 'react';\nimport AddScheduleBlock from \"./AddScheduleBlock\";\nimport ReactDOM from 'react-dom';\nimport './Schedulec.css';\nimport img2 from \"./RightTopimg.svg\";\nimport { NavLink } from \"react-router-dom\";\n\nclass ScheduleBlock {\n  constructor(name, duration, start, end, day) {\n    this.state = {\n      name: name,\n      duration: duration,\n      start: start,\n      end: end,\n      day: day\n    };\n  }\n\n}\n\nclass Schedule extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      timetable: [],\n      name: \"begin\",\n      isCollision: false\n    };\n\n    for (var i = 0; i < 144; i++) {\n      this.state.timetable[i] = [];\n\n      for (var c = 0; c < 7; c++) {\n        this.state.timetable[i][c] = \"0\";\n      }\n    }\n\n    this.handler = this.handler.bind(this);\n    this.handler2 = this.handler2.bind(this);\n    fetch('/getblock', {\n      method: 'GET'\n    }).then(response => {\n      return response.json();\n    }).then(data => {\n      for (var i in data) {\n        //throw new Error(data[i].name);\n        //throw new Error(\"ree\");\n        var name = data[i].name;\n        var start = data[i].start;\n        var end = data[i].end;\n        var duration = data[i].duration;\n        var day = data[i].day; //throw new Error (data.length);\n\n        Schedule.blocks.push(new ScheduleBlock(name, duration, start, end, day));\n        this.state.timetable = Schedule.addTimeTable();\n      }\n    }); //Schedule.addScheduleBlock(new ScheduleBlock(\"SE101\", 100, \"1:00\",\"2:40\", 1));\n    //Schedule.addScheduleBlock(new ScheduleBlock(\"SE101\", 100, \"1:00\",\"2:40\", 4));\n  }\n\n  handler(name, start, end, day) {\n    //this.state.name = name;\n    this.state.isCollision = false;\n\n    if (name === \"\" || start === \"\" || end === \"\" || day === \"\") {\n      this.state.isCollision = true;\n      this.forceUpdate();\n      return;\n    }\n\n    var arr = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\n\n    for (var i = 0; i < 7; i++) {\n      if (arr[i] == day) {\n        day = i;\n        break;\n      }\n    }\n\n    var start2 = start.split(\":\");\n    var start3 = start2[1].split(\" \");\n    var end2 = end.split(\":\");\n    var end3 = end2[1].split(\" \");\n\n    if (start3[1] == \"AM\" && start2[0] == \"12\") {\n      start2[0] = 0;\n    }\n\n    if (start3[1] == \"PM\" && start2[0] != \"12\") {\n      start2[0] = parseInt(start2[0]) + 12;\n    }\n\n    if (end3[1] == \"AM\" && end2[0] == \"12\") {\n      end2[0] = 0;\n    }\n\n    if (end3[1] == \"PM\" && end2[0] != \"12\") {\n      end2[0] = parseInt(end2[0]) + 12;\n    }\n\n    var duration = (parseInt(end2[0]) - parseInt(start2[0])) * 60 + parseInt(end3[0]) - parseInt(start3[0]);\n    this.state.name = end2[0];\n    var add = Schedule.addScheduleBlock(new ScheduleBlock(name, duration, start, end, parseInt(day)));\n\n    if (add) {\n      this.state.isCollision = true;\n    }\n\n    this.state.timetable = Schedule.addTimeTable();\n    this.forceUpdate();\n  }\n\n  handler2(name, start, end, day) {\n    this.state.isCollision = false;\n\n    if (name === \"\" || start === \"\" || end === \"\" || day === \"\") {\n      this.state.isCollision = true;\n      this.forceUpdate();\n      return;\n    } //this.state.name = name;\n\n\n    var arr = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\n\n    for (var i = 0; i < 7; i++) {\n      if (arr[i] == day) {\n        day = i;\n        break;\n      }\n    }\n\n    var start2 = start.split(\":\");\n    var start3 = start2[1].split(\" \");\n    var end2 = end.split(\":\");\n    var end3 = end2[1].split(\" \");\n\n    if (start3[1] == \"AM\" && start2[0] == \"12\") {\n      start2[0] = 0;\n    }\n\n    if (start3[1] == \"PM\" && start2[0] != \"12\") {\n      start2[0] = parseInt(start2[0]) + 12;\n    }\n\n    if (end3[1] == \"AM\" && end2[0] == \"12\") {\n      end2[0] = 0;\n    }\n\n    if (end3[1] == \"PM\" && end2[0] != \"12\") {\n      end2[0] = parseInt(end2[0]) + 12;\n    }\n\n    var duration = (parseInt(end2[0]) - parseInt(start2[0])) * 60 + parseInt(end3[0]) - parseInt(start3[0]);\n    this.state.name = end2[0];\n    Schedule.removeScheduleBlock(new ScheduleBlock(name, duration, start, end, parseInt(day)));\n    this.state.timetable = Schedule.addTimeTable();\n    this.forceUpdate();\n  }\n\n  static addScheduleBlock(block) {\n    //Retrieves schedule blocks from Database and then adds new block\n    for (var i = 0; i < this.blocks.length; i++) {\n      var start = this.blocks[i].state.start;\n      var end = this.blocks[i].state.end;\n      var day = this.blocks[i].state.day;\n\n      if (block.state.day === day) {\n        if (block.state.start < end && block.state.start > start || block.state.end < end && block.state.end > start || block.state.start === start && block.state.end === end) {\n          return true;\n          break;\n        }\n      }\n    }\n\n    if (block.state.start >= block.state.end) {\n      return true;\n    }\n\n    this.blocks.push(block);\n    fetch('/addblock', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: block.state.name,\n        start: block.state.start,\n        end: block.state.end,\n        day: block.state.day,\n        duration: block.state.duration\n      })\n    });\n    return false;\n  }\n\n  static removeScheduleBlock(block) {\n    for (var i = 0; i < this.blocks.length; i++) {\n      var name = this.blocks[i].state.name;\n      var start = this.blocks[i].state.start;\n      var end = this.blocks[i].state.end;\n      var day = this.blocks[i].state.day;\n\n      if (name === block.state.name && start === block.state.start && end === block.state.end && day == block.state.day) {\n        this.blocks.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  static addTimeTable() {\n    var timetable = [];\n\n    for (var i = 0; i < 144; i++) {\n      timetable[i] = [];\n\n      for (var c = 0; c < 7; c++) {\n        timetable[i][c] = \"0\";\n      }\n    }\n\n    for (var i = 0; i < this.blocks.length; i++) {\n      var name = this.blocks[i].state.name;\n      var duration = this.blocks[i].state.duration;\n      var start = this.blocks[i].state.start;\n      var end = this.blocks[i].state.end;\n      var day = this.blocks[i].state.day;\n      var temp = start.split(\":\");\n      var temp2 = temp[1].split(\" \");\n\n      if (temp2[1] == \"AM\" && temp[0] == \"12\") {\n        temp[0] = 0;\n      }\n\n      if (temp2[1] == \"PM\" && temp[0] != \"12\") {\n        temp[0] = parseInt(temp[0]) + 12;\n      }\n\n      var time = Math.floor((parseInt(temp[0]) * 60 + parseInt(temp[1].split(\" \")[0])) / 10);\n      timetable[time][day] = [React.createElement(\"div\", {\n        class: \"blocks\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, start + \"-\" + end)), duration / 10];\n\n      for (var c = 1; c <= duration / 10 - 1; c++) {\n        timetable[time + c][day] = -1;\n      }\n    }\n\n    return timetable;\n  }\n\n  render() {\n    var schedule = [],\n        cols = 145;\n    var days = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\n\n    for (var i = 0; i < 145; i++) {\n      schedule[i] = [];\n    }\n\n    schedule[0][0] = React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    });\n\n    for (var i = 1; i < 8; i++) {\n      schedule[0][i] = React.createElement(\"td\", {\n        class: \"days\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, days[i - 1]));\n    }\n\n    for (var i = 1; i < 145; i++) {\n      if (i == 1) {\n        schedule[i][0] = React.createElement(\"th\", {\n          rowspan: \"6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225\n          },\n          __self: this\n        }, \"12:00AM\"));\n      } else if ((i - 1) % 6 == 0) {\n        if ((i - 1) / 6 >= 12) {\n          if ((i - 1) / 6 >= 13) {\n            schedule[i][0] = React.createElement(\"th\", {\n              rowspan: \"6\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 231\n              },\n              __self: this\n            }, React.createElement(\"h3\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 232\n              },\n              __self: this\n            }, (Math.floor(i / 6) - 12).toString() + \":00PM\"));\n          } else {\n            schedule[i][0] = React.createElement(\"th\", {\n              rowspan: \"6\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 236\n              },\n              __self: this\n            }, React.createElement(\"h3\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 237\n              },\n              __self: this\n            }, Math.floor(i / 6).toString() + \":00PM\"));\n          }\n        } else {\n          schedule[i][0] = React.createElement(\"th\", {\n            rowspan: \"6\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 242\n            },\n            __self: this\n          }, React.createElement(\"h3\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 243\n            },\n            __self: this\n          }, Math.floor(i / 6).toString() + \":00AM\"));\n        }\n      }\n      /*else {\r\n          schedule[i][0] = (<td>\r\n              <h3></h3>\r\n          </td>);\r\n      }*/\n\n    }\n\n    for (var i = 1; i < 145; i++) {\n      for (var c = 1; c < 8; c++) {\n        if (this.state.timetable[i - 1][c - 1] != 0 && this.state.timetable[i - 1][c - 1] != -1) {\n          var random = Math.floor(Math.random() * 6);\n          var palette = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\n          schedule[i][c] = React.createElement(\"td\", {\n            rowspan: this.state.timetable[i - 1][c - 1][1],\n            class: palette[random],\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 258\n            },\n            __self: this\n          }, this.state.timetable[i - 1][c - 1][0]);\n        } else if (this.state.timetable[i - 1][c - 1] != -1) {\n          schedule[i][c] = React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 261\n            },\n            __self: this\n          });\n        }\n      }\n    }\n\n    var format = [145];\n\n    for (var i = 0; i < 145; i++) {\n      format[i] = React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, schedule[i]);\n    }\n    /*var schedule = [];\r\n    var days = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\r\n    for (var i = 0;i<47;i++){\r\n        schedule[i] = [];\r\n    }\r\n    schedule[0][0] = (<td></td>);\r\n    for (var i = 1;i<8;i++) {\r\n        schedule[0][i] = (<td>\r\n            <h3>{days[i - 1]}</h3>\r\n        </td>);\r\n    }\r\n    for (var i = 1;i<47;i++){\r\n        if (i==1){\r\n            schedule[i][0] = (<td>\r\n                <h3>12:00 AM</h3>\r\n            </td>);\r\n        }\r\n        else if ((i-1)%2==0) {\r\n            if ((i-1)/2 >= 12) {\r\n                schedule[i][0] = (<td>\r\n                    <h3>{(Math.floor(i / 2)).toString() + \":00 PM\"}</h3>\r\n                </td>);\r\n            }\r\n            else {\r\n                schedule[i][0] = (<td>\r\n                    <h3>{(Math.floor(i / 2)).toString() + \":00 AM\"}</h3>\r\n                </td>);\r\n            }\r\n        }\r\n        else {\r\n            if (i==2){\r\n                schedule[i][0] = (<td>\r\n                    <h3>12:30 AM</h3>\r\n                </td>);\r\n            }\r\n            else if (i/2 >= 12) {\r\n                schedule[i][0] = (<td>\r\n                    <h3>{(Math.floor((i / 2)-1)).toString() + \":30 PM\"}</h3>\r\n                </td>);\r\n            }\r\n            else {\r\n                schedule[i][0] = (<td>\r\n                    <h3>{(Math.floor((i / 2)-1)).toString() + \":30 AM\"}</h3>\r\n                </td>);\r\n            }\r\n        }\r\n    }\r\n    for (var k = 1;k<47;k++) {\r\n        for (var c = 1; c<8;c++) {\r\n            var temp = [];\r\n            for (var i = 0; i < 3; i++) {\r\n                if (this.state.timetable[(k-1)*3+i][c-1] != 0){\r\n                    temp[i] = (<tr><td bgcolor = \"green\"></td></tr>)\r\n                }\r\n                else {\r\n                    temp[i] = (<tr><td></td></tr>);\r\n                }\r\n            }\r\n        }\r\n        schedule[k]\r\n        for (var i = 1; i < 145; i++) {\r\n            for (var c = 1; c < 8; c++) {\r\n                if (this.state.timetable[i - 1][c - 1] != 0) {\r\n                    schedule[i][c] = (<td bgcolor=\"green\"></td>);\r\n                } else {\r\n                    schedule[i][c] = (<td></td>);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    var format = [47];\r\n    for (var i = 0;i<47;i++){\r\n        format[i] = (<tr class=\"tr\">\r\n            {schedule[i]}\r\n        </tr>);\r\n    }*/\n\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"scheduleout\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"schedulein\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      className: \"img2s\",\n      src: img2,\n      width: \"400\",\n      height: \"400\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }), React.createElement(NavLink, {\n      to: \"/pp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"titless\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, \"Slate\")), React.createElement(\"div\", {\n      className: \"AddSchedule\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"add\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, React.createElement(AddScheduleBlock, {\n      className: \"AddSchedule2\",\n      action: this.handler,\n      remove: this.handler2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }), this.state.isCollision ? React.createElement(\"p\", {\n      className: \"text5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, \"Your entry couldn't be added\") : null), React.createElement(\"div\", {\n      class: \"rdiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, format))))));\n  }\n\n}\n\nSchedule.blocks = [];\nexport default Schedule;","map":{"version":3,"sources":["C:\\Users\\alexm\\Documents\\GitHub\\SlateWebApp\\slate\\src\\Schedule.js"],"names":["React","AddScheduleBlock","ReactDOM","NavLink","ScheduleBlock","constructor","name","duration","start","end","day","state","Schedule","Component","props","timetable","isCollision","i","c","handler","bind","handler2","fetch","method","then","response","json","data","blocks","push","addTimeTable","forceUpdate","arr","start2","split","start3","end2","end3","parseInt","add","addScheduleBlock","removeScheduleBlock","block","length","headers","body","JSON","stringify","splice","temp","temp2","time","Math","floor","render","schedule","cols","days","toString","random","palette","format","img2"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport AddScheduleBlock from \"./AddScheduleBlock\";\r\nimport ReactDOM from 'react-dom';\r\nimport './Schedulec.css';\r\nimport img2 from \"./RightTopimg.svg\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nclass ScheduleBlock {\r\n    constructor(name, duration, start, end, day) {\r\n        this.state = {name: name, duration: duration, start: start, end: end, day: day};\r\n    }\r\n}\r\n\r\nclass Schedule extends React.Component {\r\n    static blocks = [];\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {timetable: [], name: \"begin\", isCollision: false};\r\n        for (var i = 0;i<144;i++){\r\n            this.state.timetable[i] = [];\r\n            for (var c = 0;c<7;c++){\r\n                this.state.timetable[i][c] = \"0\";\r\n            }\r\n        }\r\n        this.handler = this.handler.bind(this);\r\n        this.handler2 = this.handler2.bind(this);\r\n        fetch('/getblock', {\r\n            method: 'GET',\r\n        }). then(response => {\r\n            return response.json()\r\n        }). then(data=>{\r\n            for (var i in data){\r\n                //throw new Error(data[i].name);\r\n                //throw new Error(\"ree\");\r\n                var name = data[i].name;\r\n                var start = data[i].start;\r\n                var end = data[i].end;\r\n                var duration = data[i].duration;\r\n                var day = data[i].day;\r\n                //throw new Error (data.length);\r\n                Schedule.blocks.push(new ScheduleBlock(name, duration, start, end, day));\r\n                this.state.timetable = Schedule.addTimeTable();\r\n            }\r\n        })\r\n        //Schedule.addScheduleBlock(new ScheduleBlock(\"SE101\", 100, \"1:00\",\"2:40\", 1));\r\n        //Schedule.addScheduleBlock(new ScheduleBlock(\"SE101\", 100, \"1:00\",\"2:40\", 4));\r\n    }\r\n\r\n    handler(name, start, end, day){\r\n        //this.state.name = name;\r\n        this.state.isCollision = false;\r\n        if (name===\"\"||start===\"\"||end===\"\"||day===\"\"){\r\n            this.state.isCollision = true;\r\n            this.forceUpdate();\r\n            return;\r\n        }\r\n        var arr = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\r\n        for (var i = 0;i<7;i++){\r\n            if (arr[i]==day){\r\n                day = i;\r\n                break;\r\n            }\r\n        }\r\n        var start2 = start.split(\":\");\r\n        var start3 = start2[1].split(\" \");\r\n        var end2 = end.split(\":\");\r\n        var end3 = end2[1].split(\" \");\r\n        if (start3[1]==\"AM\"&&start2[0]==\"12\"){\r\n            start2[0] = 0;\r\n        }\r\n        if (start3[1]==\"PM\"&&start2[0]!=\"12\"){\r\n            start2[0] = parseInt(start2[0])+12;\r\n        }\r\n        if (end3[1]==\"AM\"&&end2[0]==\"12\"){\r\n            end2[0] = 0;\r\n        }\r\n        if (end3[1]==\"PM\"&&end2[0]!=\"12\"){\r\n            end2[0] = parseInt(end2[0])+12;\r\n        }\r\n        var duration = (parseInt(end2[0])-parseInt(start2[0]))*60+parseInt(end3[0])-parseInt(start3[0]);\r\n        this.state.name = end2[0];\r\n        var add = Schedule.addScheduleBlock(new ScheduleBlock(name, duration, start, end, parseInt(day)));\r\n        if (add){\r\n            this.state.isCollision = true;\r\n        }\r\n        this.state.timetable = Schedule.addTimeTable();\r\n        this.forceUpdate();\r\n    }\r\n\r\n    handler2(name, start, end, day){\r\n        this.state.isCollision = false;\r\n        if (name===\"\"||start===\"\"||end===\"\"||day===\"\"){\r\n            this.state.isCollision = true;\r\n            this.forceUpdate();\r\n            return;\r\n        }\r\n        //this.state.name = name;\r\n        var arr = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\r\n        for (var i = 0;i<7;i++){\r\n            if (arr[i]==day){\r\n                day = i;\r\n                break;\r\n            }\r\n        }\r\n        var start2 = start.split(\":\");\r\n        var start3 = start2[1].split(\" \");\r\n        var end2 = end.split(\":\");\r\n        var end3 = end2[1].split(\" \");\r\n        if (start3[1]==\"AM\"&&start2[0]==\"12\"){\r\n            start2[0] = 0;\r\n        }\r\n        if (start3[1]==\"PM\"&&start2[0]!=\"12\"){\r\n            start2[0] = parseInt(start2[0])+12;\r\n        }\r\n        if (end3[1]==\"AM\"&&end2[0]==\"12\"){\r\n            end2[0] = 0;\r\n        }\r\n        if (end3[1]==\"PM\"&&end2[0]!=\"12\"){\r\n            end2[0] = parseInt(end2[0])+12;\r\n        }\r\n        var duration = (parseInt(end2[0])-parseInt(start2[0]))*60+parseInt(end3[0])-parseInt(start3[0]);\r\n        this.state.name = end2[0];\r\n        Schedule.removeScheduleBlock(new ScheduleBlock(name, duration, start, end, parseInt(day)));\r\n        this.state.timetable = Schedule.addTimeTable();\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static addScheduleBlock(block){\r\n        //Retrieves schedule blocks from Database and then adds new block\r\n        for (var i = 0;i<this.blocks.length;i++){\r\n            var start = this.blocks[i].state.start;\r\n            var end = this.blocks[i].state.end;\r\n            var day = this.blocks[i].state.day;\r\n            if (block.state.day===day){\r\n                if ((block.state.start<end&&block.state.start>start)||(block.state.end<end&&block.state.end>start)||(block.state.start===start&&block.state.end===end)){\r\n                    return true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (block.state.start>=block.state.end){\r\n            return true;\r\n        }\r\n        this.blocks.push(block);\r\n        fetch('/addblock', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Accept': 'application/json',\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: block.state.name,\r\n                start: block.state.start,\r\n                end: block.state.end,\r\n                day: block.state.day,\r\n                duration: block.state.duration\r\n            })\r\n        })\r\n        return false;\r\n    }\r\n\r\n    static removeScheduleBlock(block){\r\n        for (var i = 0;i<this.blocks.length;i++){\r\n            var name = this.blocks[i].state.name;\r\n            var start = this.blocks[i].state.start;\r\n            var end = this.blocks[i].state.end;\r\n            var day = this.blocks[i].state.day;\r\n            if (name===block.state.name&&start===block.state.start&&end===block.state.end&&day==block.state.day){\r\n                this.blocks.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    static addTimeTable(){\r\n        var timetable = [];\r\n        for (var i = 0;i<144;i++){\r\n            timetable[i] = [];\r\n            for (var c = 0;c<7;c++){\r\n                timetable[i][c] = \"0\";\r\n            }\r\n        }\r\n        for (var i = 0;i<this.blocks.length;i++){\r\n            var name = this.blocks[i].state.name;\r\n            var duration = this.blocks[i].state.duration;\r\n            var start = this.blocks[i].state.start;\r\n            var end = this.blocks[i].state.end;\r\n            var day = this.blocks[i].state.day;\r\n            var temp = start.split(\":\");\r\n            var temp2 = temp[1].split(\" \");\r\n            if (temp2[1]==\"AM\"&&temp[0]==\"12\"){\r\n                temp[0] = 0;\r\n            }\r\n            if (temp2[1]==\"PM\"&&temp[0]!=\"12\"){\r\n                temp[0] = parseInt(temp[0])+12;\r\n            }\r\n            var time = Math.floor((parseInt(temp[0])*60+parseInt(temp[1].split(\" \")[0]))/10);\r\n            timetable[time][day] = [<div class = \"blocks\">\r\n                                        <h3>{name}</h3>\r\n                                        <p>{start + \"-\" + end}</p>\r\n                                    </div>, duration/10];\r\n            for (var c = 1;c<=duration/10 - 1;c++) {\r\n                timetable[time + c][day] = -1;\r\n            }\r\n        }\r\n        return timetable;\r\n    }\r\n\r\n    render(){\r\n        var schedule = [], cols = 145;\r\n        var days = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\r\n        for (var i = 0;i<145;i++){\r\n            schedule[i] = [];\r\n        }\r\n        schedule[0][0] = (<td></td>);\r\n        for (var i = 1;i<8;i++) {\r\n            schedule[0][i] = (<td class = \"days\">\r\n                <h3>{days[i - 1]}</h3>\r\n            </td>);\r\n        }\r\n        for (var i = 1;i<145;i++){\r\n            if (i==1){\r\n                schedule[i][0] = (<th rowspan = \"6\">\r\n                    <h3>{\"12:00AM\"}</h3>\r\n                </th>);\r\n            }\r\n            else if ((i-1)%6==0) {\r\n                if ((i - 1) / 6 >= 12) {\r\n                    if ((i-1) / 6 >= 13) {\r\n                        schedule[i][0] = (<th rowspan = \"6\">\r\n                            <h3>{(Math.floor(i / 6)-12).toString() + \":00PM\"}</h3>\r\n                        </th>);\r\n                    }\r\n                    else {\r\n                        schedule[i][0] = (<th rowspan = \"6\">\r\n                            <h3>{(Math.floor(i / 6)).toString() + \":00PM\"}</h3>\r\n                        </th>);\r\n                    }\r\n                }\r\n                else {\r\n                    schedule[i][0] = (<th rowspan = \"6\">\r\n                        <h3>{(Math.floor(i / 6)).toString() + \":00AM\"}</h3>\r\n                    </th>);\r\n                }\r\n            }\r\n            /*else {\r\n                schedule[i][0] = (<td>\r\n                    <h3></h3>\r\n                </td>);\r\n            }*/\r\n        }\r\n        for (var i = 1;i<145;i++){\r\n            for (var c = 1;c<8;c++){\r\n                if (this.state.timetable[i-1][c-1]!=0&&this.state.timetable[i-1][c-1]!=-1) {\r\n                    var random = Math.floor(Math.random()*6);\r\n                    var palette = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\r\n                    schedule[i][c] = (<td rowspan = {this.state.timetable[i-1][c-1][1]} class = {palette[random]}>{this.state.timetable[i-1][c-1][0]}</td>);\r\n                }\r\n                else if (this.state.timetable[i-1][c-1]!=-1){\r\n                    schedule[i][c] = (<td></td>);\r\n                }\r\n            }\r\n        }\r\n        var format = [145];\r\n        for (var i = 0;i<145;i++){\r\n            format[i] = (<tr>\r\n                {schedule[i]}\r\n            </tr>);\r\n        }\r\n        /*var schedule = [];\r\n        var days = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\r\n        for (var i = 0;i<47;i++){\r\n            schedule[i] = [];\r\n        }\r\n        schedule[0][0] = (<td></td>);\r\n        for (var i = 1;i<8;i++) {\r\n            schedule[0][i] = (<td>\r\n                <h3>{days[i - 1]}</h3>\r\n            </td>);\r\n        }\r\n        for (var i = 1;i<47;i++){\r\n            if (i==1){\r\n                schedule[i][0] = (<td>\r\n                    <h3>12:00 AM</h3>\r\n                </td>);\r\n            }\r\n            else if ((i-1)%2==0) {\r\n                if ((i-1)/2 >= 12) {\r\n                    schedule[i][0] = (<td>\r\n                        <h3>{(Math.floor(i / 2)).toString() + \":00 PM\"}</h3>\r\n                    </td>);\r\n                }\r\n                else {\r\n                    schedule[i][0] = (<td>\r\n                        <h3>{(Math.floor(i / 2)).toString() + \":00 AM\"}</h3>\r\n                    </td>);\r\n                }\r\n            }\r\n            else {\r\n                if (i==2){\r\n                    schedule[i][0] = (<td>\r\n                        <h3>12:30 AM</h3>\r\n                    </td>);\r\n                }\r\n                else if (i/2 >= 12) {\r\n                    schedule[i][0] = (<td>\r\n                        <h3>{(Math.floor((i / 2)-1)).toString() + \":30 PM\"}</h3>\r\n                    </td>);\r\n                }\r\n                else {\r\n                    schedule[i][0] = (<td>\r\n                        <h3>{(Math.floor((i / 2)-1)).toString() + \":30 AM\"}</h3>\r\n                    </td>);\r\n                }\r\n            }\r\n        }\r\n        for (var k = 1;k<47;k++) {\r\n            for (var c = 1; c<8;c++) {\r\n                var temp = [];\r\n                for (var i = 0; i < 3; i++) {\r\n                    if (this.state.timetable[(k-1)*3+i][c-1] != 0){\r\n                        temp[i] = (<tr><td bgcolor = \"green\"></td></tr>)\r\n                    }\r\n                    else {\r\n                        temp[i] = (<tr><td></td></tr>);\r\n                    }\r\n                }\r\n            }\r\n            schedule[k]\r\n            for (var i = 1; i < 145; i++) {\r\n                for (var c = 1; c < 8; c++) {\r\n                    if (this.state.timetable[i - 1][c - 1] != 0) {\r\n                        schedule[i][c] = (<td bgcolor=\"green\"></td>);\r\n                    } else {\r\n                        schedule[i][c] = (<td></td>);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var format = [47];\r\n        for (var i = 0;i<47;i++){\r\n            format[i] = (<tr class=\"tr\">\r\n                {schedule[i]}\r\n            </tr>);\r\n        }*/\r\n        return(\r\n            <div>\r\n                <div className = \"scheduleout\">\r\n                     <div className = \"schedulein\">\r\n                         <img className=\"img2s\" src={img2} width=\"400\" height=\"400\"/>\r\n                         <NavLink to = \"/pp\"><h1 className=\"titless\">Slate</h1></NavLink>\r\n                         <div className = \"AddSchedule\">\r\n                             <div className = \"add\">\r\n                                <AddScheduleBlock className = \"AddSchedule2\" action={this.handler} remove={this.handler2}/>\r\n                                 {this.state.isCollision ? <p className=\"text5\">Your entry couldn't be added</p>: null}\r\n                             </div>\r\n                             <div class = \"rdiv\">\r\n                                 <table>\r\n                                     {format}\r\n                                 </table>\r\n                             </div>\r\n                         </div>\r\n                     </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Schedule;\r\n"]},"metadata":{},"sourceType":"module"}